{"remainingRequest":"/home/rido/code/vue-10-apps/node_modules/babel-loader/lib/index.js!/home/rido/code/vue-10-apps/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/rido/code/vue-10-apps/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/rido/code/vue-10-apps/src/pages/Chat.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/rido/code/vue-10-apps/src/pages/Chat.vue","mtime":1611647888837},{"path":"/home/rido/code/vue-10-apps/node_modules/cache-loader/dist/cjs.js","mtime":1610270851788},{"path":"/home/rido/code/vue-10-apps/node_modules/babel-loader/lib/index.js","mtime":1610188258325},{"path":"/home/rido/code/vue-10-apps/node_modules/cache-loader/dist/cjs.js","mtime":1610270851788},{"path":"/home/rido/code/vue-10-apps/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1610270854965}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvcmlkby9jb2RlL3Z1ZS0xMC1hcHBzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgb25Nb3VudGVkLCByZWFjdGl2ZSwgcmVmIH0gZnJvbSAidnVlIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gIi4uL3V0aWxpdGllcy9maXJlYmFzZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgZm9jdXNSZWYgPSByZWYoIiIpOwogICAgdmFyIHN0YXRlID0gcmVhY3RpdmUoewogICAgICBjaGF0czoge30sCiAgICAgIG1lc3NhZ2U6ICIiLAogICAgICB1c2VySWQ6IG51bGwKICAgIH0pOwogICAgb25Nb3VudGVkKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgcmVzcG9uc2U7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAvLyBmb2N1cyBpbnB1dCB0ZXh0CiAgICAgICAgICAgICAgZm9jdXNSZWYudmFsdWUuZm9jdXMoKTsgLy8gZm9yIGdldCBkYXRhIGNoYXQgZnJvbSByZWFsdGltZSBkYXRhYmFzZQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoImNoYXRzIikub25jZSgidmFsdWUiKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgc3RhdGUuY2hhdHMgPSByZXNwb25zZS52YWwoKTsgLy8gd2hhdGNpbmcgZm9yIGNoYW5nZXMgcmVhbHRpbWUgZGF0YWJhc2UKCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCJjaGF0cyIpLm9uKCJ2YWx1ZSIsIGZ1bmN0aW9uIChzbmFwc2hvdCkgewogICAgICAgICAgICAgICAgc3RhdGUuY2hhdHMgPSBzbmFwc2hvdC52YWwoKTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLnVpZDsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBzdGF0ZS51c2VySWQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkpOyAvLyBmdW5jdGlvbiBmb3IgcHVzaC9hZGQgbWVzc2FnZSB0byBmaXJlYmFzZSByZWFsdGltZSBkYXRhYmFzZQoKICAgIHZhciBhZGRNZXNzYWdlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgbmV3Q2hhdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCJjaGF0cyIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBuZXdDaGF0ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBuZXdDaGF0LnB1c2goKS5zZXQoewogICAgICAgICAgICAgICAgICB1c2VySWQ6IHN0YXRlLnVzZXJJZCwKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogc3RhdGUubWVzc2FnZQogICAgICAgICAgICAgICAgfSk7IC8vIGNsZWFyIHRleHQgZmllbGQgYWZ0ZXIgZG9uZSBwdXNoIG1lc3NhZ2UKCiAgICAgICAgICAgICAgICBzdGF0ZS5tZXNzYWdlID0gIiI7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBhZGRNZXNzYWdlKCkgewogICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHJldHVybiB7CiAgICAgIHN0YXRlOiBzdGF0ZSwKICAgICAgYWRkTWVzc2FnZTogYWRkTWVzc2FnZSwKICAgICAgZm9jdXNSZWY6IGZvY3VzUmVmCiAgICB9OwogIH0KfTs="},{"version":3,"sources":["/home/rido/code/vue-10-apps/src/pages/Chat.vue"],"names":[],"mappings":";;AAwCA,SAAS,SAAT,EAAoB,QAApB,EAA8B,GAA9B,QAAyC,KAAzC;AACA,OAAO,QAAP,MAAqB,uBAArB;AACA,eAAe;AACX,EAAA,KADW,mBACH;AACJ,QAAM,QAAO,GAAI,GAAG,CAAC,EAAD,CAApB;AACA,QAAM,KAAI,GAAI,QAAQ,CAAC;AACnB,MAAA,KAAK,EAAE,EADY;AAEnB,MAAA,OAAO,EAAE,EAFU;AAGnB,MAAA,MAAM,EAAE;AAHW,KAAD,CAAtB;AAMA,IAAA,SAAS,uEAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AACN;AACA,cAAA,QAAQ,CAAC,KAAT,CAAe,KAAf,GAFM,CAIN;;AAJM;AAAA,qBAKiB,QAAO,CACzB,QADkB,GAElB,GAFkB,CAEd,OAFc,EAGlB,IAHkB,CAGb,OAHa,CALjB;;AAAA;AAKA,cAAA,QALA;AASN,cAAA,KAAK,CAAC,KAAN,GAAc,QAAQ,CAAC,GAAT,EAAd,CATM,CAWN;;AAXM;AAAA,qBAYA,QAAO,CACR,QADC,GAED,GAFC,CAEG,OAFH,EAGD,EAHC,CAGE,OAHF,EAGW,UAAC,QAAD,EAAc;AACvB,gBAAA,KAAK,CAAC,KAAN,GAAc,QAAQ,CAAC,GAAT,EAAd;AACH,eALC,CAZA;;AAAA;AAAA;AAAA,qBAoBe,QAAQ,CAAC,IAAT,GAAgB,WAAhB,CAA4B,GApB3C;;AAAA;AAoBN,cAAA,KAAK,CAAC,MApBA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD,GAAT,CARI,CA+BJ;;AACA,QAAM,UAAS;AAAA,0EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACO,QAAQ,CAAC,QAAT,GAAoB,GAApB,CAAwB,OAAxB,CADP;;AAAA;AACT,gBAAA,OADS;AAEf,gBAAA,OAAO,CAAC,IAAR,GAAe,GAAf,CAAmB;AACf,kBAAA,MAAM,EAAE,KAAK,CAAC,MADC;AAEf,kBAAA,OAAO,EAAE,KAAK,CAAC;AAFA,iBAAnB,EAFe,CAMf;;AACA,gBAAA,KAAK,CAAC,OAAN,GAAgB,EAAhB;;AAPe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAT,UAAS;AAAA;AAAA;AAAA,OAAf;;AAUA,WAAO;AAAE,MAAA,KAAK,EAAL,KAAF;AAAS,MAAA,UAAU,EAAV,UAAT;AAAqB,MAAA,QAAO,EAAP;AAArB,KAAP;AACH;AA5CU,CAAf","sourcesContent":["<template>\n    <div class=\"flex flex-col w-full my-4\">\n        <div class=\"m-auto\">\n            <h1 class=\"text-2xl text-center my-2\">Realtime Chat vue</h1>\n            <div class=\"border rounded bg-white w-96\">\n                <div class=\"h-96 p-4 flex flex-col space-y-4 overflow-y-scroll\">\n                    <div\n                        v-for=\"chat in state.chats\"\n                        :key=\"chat.message\"\n                        class=\"w-full\"\n                        :class=\"\n                            chat.userId === state.userId ? 'text-right' : ''\n                        \"\n                    >\n                        <span\n                            class=\"p-2 rounded-lg text-white shadow\"\n                            :class=\"\n                                chat.userId === state.userId\n                                    ? 'bg-green-500'\n                                    : 'bg-blue-500'\n                            \"\n                            >{{ chat.message }}</span\n                        >\n                    </div>\n                </div>\n                <div class=\"h-8 p-2\">\n                    <input\n                        class=\"w-full p-2 border rounded-lg shadow focus:outline-none focus:ring focus:ring-blue-400 focus:ring-offset-2\"\n                        placeholder=\"Type message...\"\n                        ref=\"focusRef\"\n                        v-model=\"state.message\"\n                        @keydown.enter=\"addMessage\"\n                    />\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { onMounted, reactive, ref } from \"vue\";\nimport firebase from \"../utilities/firebase\";\nexport default {\n    setup() {\n        const focusRef = ref(\"\");\n        const state = reactive({\n            chats: {},\n            message: \"\",\n            userId: null,\n        });\n\n        onMounted(async () => {\n            // focus input text\n            focusRef.value.focus();\n\n            // for get data chat from realtime database\n            const response = await firebase\n                .database()\n                .ref(\"chats\")\n                .once(\"value\");\n            state.chats = response.val();\n\n            // whatcing for changes realtime database\n            await firebase\n                .database()\n                .ref(\"chats\")\n                .on(\"value\", (snapshot) => {\n                    state.chats = snapshot.val();\n                });\n\n            // get id user login\n            state.userId = await firebase.auth().currentUser.uid;\n        });\n\n        // function for push/add message to firebase realtime database\n        const addMessage = async () => {\n            const newChat = await firebase.database().ref(\"chats\");\n            newChat.push().set({\n                userId: state.userId,\n                message: state.message,\n            });\n            // clear text field after done push message\n            state.message = \"\";\n        };\n\n        return { state, addMessage, focusRef };\n    },\n};\n</script>\n\n<style>\n</style>"],"sourceRoot":""}]}