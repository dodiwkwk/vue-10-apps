{"remainingRequest":"/home/rido/code/vue-10-apps/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/rido/code/vue-10-apps/src/pages/Chat.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/rido/code/vue-10-apps/src/pages/Chat.vue","mtime":1611728242646},{"path":"/home/rido/code/vue-10-apps/node_modules/cache-loader/dist/cjs.js","mtime":1610270851788},{"path":"/home/rido/code/vue-10-apps/node_modules/babel-loader/lib/index.js","mtime":1610188258325},{"path":"/home/rido/code/vue-10-apps/node_modules/cache-loader/dist/cjs.js","mtime":1610270851788},{"path":"/home/rido/code/vue-10-apps/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1610270854965}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGNvbXB1dGVkLCBvbk1vdW50ZWQsIHJlYWN0aXZlLCByZWYgfSBmcm9tICJ2dWUiOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAiLi4vdXRpbGl0aWVzL2ZpcmViYXNlIjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogICAgc2V0dXAoKSB7CiAgICAgICAgY29uc3QgZm9jdXNSZWYgPSByZWYoIiIpOwogICAgICAgIGNvbnN0IHN0YXRlID0gcmVhY3RpdmUoewogICAgICAgICAgICBjaGF0czoge30sCiAgICAgICAgICAgIG1lc3NhZ2U6ICIiLAogICAgICAgIH0pOwoKICAgICAgICAvLyBnZXQgdXNlciBkYXRhIGlkIGZyb20gc3RvcmUgKHZ1ZXgpCiAgICAgICAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZSgpOwogICAgICAgIGNvbnN0IHVzZXJJZCA9IGNvbXB1dGVkKCgpID0+IHN0b3JlLnN0YXRlLmF1dGhVc2VyLnVpZCk7CgogICAgICAgIG9uTW91bnRlZChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIC8vIGZvY3VzIGlucHV0IHRleHQKICAgICAgICAgICAgZm9jdXNSZWYudmFsdWUuZm9jdXMoKTsKCiAgICAgICAgICAgIC8vIGZvciBnZXQgZGF0YSBjaGF0IGZyb20gcmVhbHRpbWUgZGF0YWJhc2UKICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmaXJlYmFzZQogICAgICAgICAgICAgICAgLmRhdGFiYXNlKCkKICAgICAgICAgICAgICAgIC5yZWYoImNoYXRzIikKICAgICAgICAgICAgICAgIC5vbmNlKCJ2YWx1ZSIpOwogICAgICAgICAgICBzdGF0ZS5jaGF0cyA9IHJlc3BvbnNlLnZhbCgpOwoKICAgICAgICAgICAgLy8gd2hhdGNpbmcgZm9yIGNoYW5nZXMgcmVhbHRpbWUgZGF0YWJhc2UKICAgICAgICAgICAgYXdhaXQgZmlyZWJhc2UKICAgICAgICAgICAgICAgIC5kYXRhYmFzZSgpCiAgICAgICAgICAgICAgICAucmVmKCJjaGF0cyIpCiAgICAgICAgICAgICAgICAub24oInZhbHVlIiwgKHNuYXBzaG90KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY2hhdHMgPSBzbmFwc2hvdC52YWwoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICAvLyBmdW5jdGlvbiBmb3IgcHVzaC9hZGQgbWVzc2FnZSB0byBmaXJlYmFzZSByZWFsdGltZSBkYXRhYmFzZQogICAgICAgIGNvbnN0IGFkZE1lc3NhZ2UgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IG5ld0NoYXQgPSBhd2FpdCBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigiY2hhdHMiKTsKICAgICAgICAgICAgbmV3Q2hhdC5wdXNoKCkuc2V0KHsKICAgICAgICAgICAgICAgIHVzZXJJZDogdXNlcklkLnZhbHVlLAogICAgICAgICAgICAgICAgbWVzc2FnZTogc3RhdGUubWVzc2FnZSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vIGNsZWFyIHRleHQgZmllbGQgYWZ0ZXIgZG9uZSBwdXNoIG1lc3NhZ2UKICAgICAgICAgICAgc3RhdGUubWVzc2FnZSA9ICIiOwogICAgICAgIH07CgogICAgICAgIHJldHVybiB7IHN0YXRlLCBhZGRNZXNzYWdlLCBmb2N1c1JlZiwgdXNlcklkIH07CiAgICB9LAp9Owo="},{"version":3,"sources":["/home/rido/code/vue-10-apps/src/pages/Chat.vue"],"names":[],"mappings":"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","file":"/home/rido/code/vue-10-apps/src/pages/Chat.vue","sourceRoot":"","sourcesContent":["<template>\n    <div class=\"flex flex-col w-full my-4\">\n        <div class=\"m-auto\">\n            <h1 class=\"text-2xl text-center my-2\">Realtime Chat vue</h1>\n            <div class=\"border rounded bg-white w-96\">\n                <div class=\"h-96 p-4 flex flex-col space-y-4 overflow-y-scroll\">\n                    <div\n                        v-for=\"chat in state.chats\"\n                        :key=\"chat.message\"\n                        class=\"w-full\"\n                        :class=\"chat.userId === userId ? 'text-right' : ''\"\n                    >\n                        <span\n                            class=\"p-2 rounded-lg text-white shadow\"\n                            :class=\"\n                                chat.userId === userId\n                                    ? 'bg-green-500'\n                                    : 'bg-blue-500'\n                            \"\n                            >{{ chat.message }}</span\n                        >\n                    </div>\n                </div>\n                <div class=\"h-8 p-2\">\n                    <input\n                        class=\"w-full p-2 border rounded-lg shadow focus:outline-none focus:ring focus:ring-blue-400 focus:ring-offset-2\"\n                        placeholder=\"Type message...\"\n                        ref=\"focusRef\"\n                        v-model=\"state.message\"\n                        @keydown.enter=\"addMessage\"\n                    />\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { computed, onMounted, reactive, ref } from \"vue\";\nimport firebase from \"../utilities/firebase\";\nimport { useStore } from \"vuex\";\nexport default {\n    setup() {\n        const focusRef = ref(\"\");\n        const state = reactive({\n            chats: {},\n            message: \"\",\n        });\n\n        // get user data id from store (vuex)\n        const store = useStore();\n        const userId = computed(() => store.state.authUser.uid);\n\n        onMounted(async () => {\n            // focus input text\n            focusRef.value.focus();\n\n            // for get data chat from realtime database\n            const response = await firebase\n                .database()\n                .ref(\"chats\")\n                .once(\"value\");\n            state.chats = response.val();\n\n            // whatcing for changes realtime database\n            await firebase\n                .database()\n                .ref(\"chats\")\n                .on(\"value\", (snapshot) => {\n                    state.chats = snapshot.val();\n                });\n        });\n\n        // function for push/add message to firebase realtime database\n        const addMessage = async () => {\n            const newChat = await firebase.database().ref(\"chats\");\n            newChat.push().set({\n                userId: userId.value,\n                message: state.message,\n            });\n            // clear text field after done push message\n            state.message = \"\";\n        };\n\n        return { state, addMessage, focusRef, userId };\n    },\n};\n</script>\n\n<style>\n</style>"]}]}